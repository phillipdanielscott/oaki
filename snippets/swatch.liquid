{% comment %}
  Set the extension of your color files below. Use 'png', 'jpeg', 'jpg' or 'gif'.
{% endcomment %}

{% assign file_extension = 'png' %}

{% if swatch == blank %}
<div class="swatch error">
  <p>You must include the snippet swatch.liquid with the name of a product option.</p>
  <p>Use: <code>{% raw %}{% include 'swatch' with 'name of your product option here' %}{% endraw %}</code></p>
  <p>Example: <code>{% raw %}{% include 'swatch' with 'Color' %}{% endraw %}</code></p>
</div>
{% else %}

{% assign found_option = false %}
{% assign is_color = false %}
{% assign option_index = 0 %}

{% for option in product.options %}
  {% if option == swatch %}
    {% assign found_option = true %}
    {% assign option_index = forloop.index0 %}
    <style>
      label[for="product-select-option-{{ option_index }}"] { display: none; }
      #add-to-cart-form .selector-wrapper {display:none}
      #product-select-option-{{ option_index }} { display: none; }
      #product-select-option-{{ option_index }} + .custom-style-select-box { display: none !important; }
    </style>
    <script>jQuery(window).load(function() { jQuery('.product-shop .selector-wrapper:eq({{ option_index }})').hide(); });</script>
    {% assign downcased_option = swatch | downcase %}
    {% if downcased_option contains 'color' or downcased_option contains 'colour' %}
      {% assign is_color = true %}
    {% endif %}
  {% endif %}
{% endfor %}


{% unless found_option %}
  <div class="swatch error">
    <p>You included the snippet swatch.liquid with the name of a product option — <code>'{{ swatch }}'</code> — that does not belong to your product.</p>
    <p>Use <code>{% raw %}{% include 'swatch' with 'name of your product option here' %}{% endraw %}</code></p>
    <p>Example: <code>{% raw %}{% include 'swatch' with 'Color' %}{% endraw %}</code></p>
    <p><strong>This is case-sensitive!</strong> Do not put in <code>'color'</code> if your product option name is <code>'Color'</code>.</p>
  </div>
  {% else %}
  {% if is_color == false %}
  <div class=" row swatch clearfix size sw-{{option_index}}" data-option-index="{{ option_index }}">
    <!-- {% if is_color %}color {% else %} size {% endif %} sw-{{ option_index }} -->
    <!-- <div class="header">{{ swatch }}</div> -->
    <div class="swatch-container" style="width:80%">
      {% assign values = '' %}
      {% assign filterM_T_Y = "M,T,Y,/,2,5,6,7,8,9,10" | split:"," %}
      {% for newFilterM in filterM_T_Y %}
      {% for variant in product.variants %}

      <!-- <script type="text/javascript">
        console.log("the variant is", "{{ variant.title }}");
      </script> -->


        {% if variant.available %}
          {% assign value = variant.options[option_index] %}

            {% if value contains newFilterM %}

            {% else %}

                {% continue %}

            {% endif %}

          {% unless values contains value %}
          {% assign values = values | join: ',' %}
          {% assign values = values | append: ',' | append: value %}
          {% assign values = values | split: ',' %}
          <div data-value="{{ value | escape }}"
          style="padding:0px; height:55px;
          {% if product.title contains "Trail Gloves"%}
            width: -webkit-fill-available;
            margin-top: 5px;
          {% endif %}"
          class="swatch-element {{ value | handle }}
          available
          col-md-3 col-sm-6 col-xs-4 testing1
          ">
          {% if value == "12 Month" or value == "12 MONTH" or value == "12 MONTHS" or value == "12 Months"%}
            {% assign value = "12M"%}
          {% endif %}
          <input id="swatch-{{ option_index }}-{{ value | handle }}"
          class="product-size-name"
          style="display:none !important"
          type="radio"
          name="option-{{ option_index }}"
          value="{{ value | escape }}"
          {% if forloop.first %}
          checked
          {% endif %}
          {% unless variant.available %}
          disabled
          {% endunless %}
          class="hidden"
          />
          {% if is_color %}
            {{is_color}}
            <label for="swatch-{{ option_index }}-{{ value | handle }}"
            style="{% if section.settings.swatch_style =='image_variant' %}
            background-size: cover;background-image: url({{ variant.featured_image.src | img_url:'118x150'| split: "?" | first  }});
            {%endif %}
            {% if section.settings.swatch_style =='color' %}
            background-color: #{{ value | split: ' ' | last | handle }}; background-color: {{ value | split: ' ' | last | handle }};
            {%endif %}
            {% if section.settings.swatch_style =='color_image' %}
            background-image: url(http:{{ value | handle | append: '.' | append: file_extension | asset_url }});
            {% endif %}">
              <img class="crossed-out" src="{{ 'soldout.png' | asset_url }}" />
            </label>
          {% else %}
            <label for="swatch-{{ option_index }}-{{ value | handle }}">
              {% if value == "12 months" or value == "12 MONTH" or value == "12 MONTHS" %}
                {% assign value = "12M" %}
              {% endif %}
              {{value}}
              <img class="crossed-out" src="{{ 'soldout.png' | asset_url }}" />
            </label>
          {% endif %}
        </div>
        {% endunless %}
        {% if variant.available %}
        <script>
          jQuery('.swatch[data-option-index="{{ option_index }}"] .{{ value | handle }}').removeClass('soldout').addClass('available').find(':radio').removeAttr('disabled');
        </script>
        {% endif %}
      {% endif %}
      {% assign value = variant.options[option_index] %}

      {% if value contains newFilterM %}

      {% else %}

          {% continue %}

      {% endif %}
      {% unless values contains value %}
      {% assign values = values | join: ',' %}
      {% assign values = values | append: ',' | append: value %}
      {% assign values = values | split: ',' %}
      <div data-value="{{ value | escape }}"
      style="padding:0px; height:55px;
      {% if product.title contains "Trail Gloves"%}
        width: -webkit-fill-available;
      {% endif %}
      "
      class="swatch-element {{ value | handle }}
      {% if variant.available %}
      available
      {% else %}
      soldout
      {% endif %}
      col-md-3 col-sm-6 col-xs-4 testing2
      ">
      <input id="swatch-{{ option_index }}-{{ value | handle }}"
      class="product-size-name"
      style="display:none !important"
      type="radio"
      name="option-{{ option_index }}"
      value="{{ value | escape }}"
      {% if forloop.first %}
      checked
      {% endif %}
      {% unless variant.available %}
      disabled
      {% endunless %}
      class="hidden"
      />
      {% if is_color %}

        {{is_color}}
        <label for="swatch-{{ option_index }}-{{ value | handle }}"
        style="{% if section.settings.swatch_style =='image_variant' %}
        background-size: cover;background-image: url({{ variant.featured_image.src | img_url:'118x150'| split: "?" | first  }});
        {%endif %}
        {% if section.settings.swatch_style =='color' %}
        background-color: #{{ value | split: ' ' | last | handle }}; background-color: {{ value | split: ' ' | last | handle }};
        {%endif %}
        {% if section.settings.swatch_style =='color_image' %}
        background-image: url(http:{{ value | handle | append: '.' | append: file_extension | asset_url }});
        {% endif %}">
          <img class="crossed-out" src="{{ 'soldout.png' | asset_url }}" />
        </label>
      {% else %}
        <label for="swatch-{{ option_index }}-{{ value | handle }}">
          {% if value == "12 months" or value == "12 MONTH" or value == "12 MONTHS" %}
            {% assign value = "12M" %}
          {% endif %}
          {{value}}
          <img class="crossed-out" src="{{ 'soldout.png' | asset_url }}" />
        </label>
      {% endif %}
  </div>
  {% endunless %}
  {% if variant.available %}
  <script>
    jQuery('.swatch[data-option-index="{{ option_index }}"] .{{ value | handle }}').removeClass('soldout').addClass('available').find(':radio').removeAttr('disabled');
  </script>
  {% endif %}
  {% endfor %}
  {% endfor %}
    </div>
  </div>
  {% else %}
  <div class=" row swatch clearfix color sw-{{option_index}}" data-option-index="{{ option_index }}" style="{% if swatch == "Color"%}  display:none; {% else %}  {% endif %}">
    <div class="header">{{ swatch }}}</div>
      {% assign values = '' %}
      <select class="duplicate">
        <option val="Choose Options">Choose Options</option>
        {% for variant in product.variants %}
          {% assign value = variant.options[option_index] %}
          {% unless values contains value %}
            {% assign values = values | join: ',' %}
            {% assign values = values | append: ',' | append: value %}
            {% assign values = values | split: ',' %}
            <option
            name="option-{{ option_index }}"
            value="{{ value | escape }}"
            {% if forloop.first %}
              selected
            {% endif %}
            {% unless variant.available %}
              disabled
            {% endunless %}
            >
            {{value}}
          </option>
          {% endunless %}
        {% endfor %}
      </select>
  </div>
  {% endif %}

{% endunless %}
{% endif %}
